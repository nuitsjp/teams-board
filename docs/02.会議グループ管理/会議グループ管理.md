# 会議グループ管理

Teams 会議タイトルから自動生成された会議グループ名を、組織の命名規則に準拠した名称へ修正する。参加者レポートの取り込み時に会議タイトルがそのまま会議グループ名となるため、表記ゆれや不要な装飾文字列を含む場合がある。管理者が会議グループ名を修正し、閲覧者がダッシュボードで修正結果を確認することで、参加記録の可読性を向上させる。

!!! info
    本業務は日常的な参加状況管理とは異なり、必要に応じて実施するメンテナンス業務として位置づけられる。管理者による修正（B01）と閲覧者による確認（B02・B03）はデータストア（参加記録）を介して非同期に連携される。

## ユースケース

### 正常系の事前条件

- 管理者が SAS トークン付き URL でシステムにアクセスしている
- 修正対象の会議グループがすでにインデックスに登録されている
- 修正後の名称が組織の命名規則に準拠している

### アクティビティ図

```mermaid
flowchart TD
    開始@{ shape: circle, label: "開始" }
    終了(((終了)))

    subgraph 管理者
        B01[会議グループ名修正]
    end

    DB[(参加記録)]

    subgraph 閲覧者
        B02[メンバー活動実績閲覧]
        B03[会議グループ開催実績閲覧]
    end

    開始 --> B01
    B01 -.更新.-> DB
    DB -.-> B02
    DB -.-> B03
    B02 --> 終了
    B03 --> 終了
```

### 正常系の事後条件

- インデックスの対象会議グループの名称が新しい名称に更新されている
- 会議グループIDは変更されていない
- ダッシュボードに更新後の会議グループ名が反映されている

### ユースケース一覧

| # | アクター | ユースケース | 説明 |
|--|--|--|--|
| B01 | 管理者 | 会議グループ名修正 | 管理者パネルの会議グループ管理で会議グループ名を編集・検証・保存する |
| B02 | 閲覧者 | メンバー活動実績閲覧 | メンバー詳細画面で会議グループ別の参加履歴を確認し、修正後の会議グループ名が反映されていることを確認する |
| B03 | 閲覧者 | 会議グループ開催実績閲覧 | 会議グループ詳細画面で会議別の参加者と開催実績を確認し、修正後の会議グループ名が反映されていることを確認する |

### オブジェクト一覧

| # | オブジェクト名 | 説明 |
|--|--|--|
| 1 | 会議グループ | 勉強会・ミーティングの活動単位。ID（不変）と名称（変更可能）を持つ |
| 2 | インデックス | 会議グループ・メンバーの集約情報。更新日時を持つ |

### 制約

- 会議グループ名を変更しても会議グループIDは変更されない
- 会議グループ名保存時は `updatedAt` タイムスタンプ比較で同時編集を検知し、不一致時は再読み込みを要求する

## シナリオ一覧

| # | シナリオ | 概要 |
|--|--|--|
| 1 | [会議グループ名の修正とメンバー活動実績の確認](シナリオ/01.グループ名の修正とメンバー活動実績の確認.md) | 管理者が会議グループ名を修正し、閲覧者がメンバーの活動実績で修正結果を確認する |
| 2 | [会議グループ名の修正と会議グループ開催実績の確認](シナリオ/02.グループ名の修正とグループ開催実績の確認.md) | 管理者が会議グループ名を修正し、閲覧者が会議グループの開催実績で修正結果を確認する |

## 詳細

### 業務設定要件

| # | 項目 | 内容 | 備考 |
|--|--|--|--|
| 1 | データ取得元 | `data/index.json` | 管理者パネル表示時に取得 |
| 2 | データ保存先 | `data/index.json` | 会議グループ名更新時に上書き保存 |
| 3 | 認証方式 | SAS トークン | 管理者更新時のみ必要 |

### ジョブスケジュール

| # | 項目 | 内容 | 対応 |
|--|--|--|--|
| 1 | 実行可能時間帯 | 制限なし（管理者の手動操作時に随時実行） | - |
| 2 | スケジュールされた時間帯を超えた場合の挙動 | スケジュール実行はなく、都度実行のため対象外 | - |
| 3 | ファイル連携予定時刻 | 固定時刻なし | - |

### アーカイブ

| # | 機能 | 期間[日] | 方式 | 説明 |
|--|--|--|--|--|
| 1 | 会議グループ名修正（B01） | 対象なし | 対象なし | `data/index.json` を更新し、履歴ファイルは生成しない |
| 2 | 参加記録参照（B02/B03） | 無期限 | コピー | `data/index.json` は最新状態の表示に利用するため保持する |

