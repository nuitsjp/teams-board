@import 'tailwindcss';

/* デザイントークン定義 */
@theme {
  /* プライマリ — スレートティール系 */
  --color-primary-50: #f0faf8;
  --color-primary-100: #d4f0ea;
  --color-primary-200: #a9e1d6;
  --color-primary-300: #70c9b8;
  --color-primary-400: #3fb09e;
  --color-primary-500: #2a9d8f;
  --color-primary-600: #207d72;
  --color-primary-700: #1d655d;
  --color-primary-800: #1a504b;
  --color-primary-900: #16423e;

  /* アクセント — ウォームコーラル系 */
  --color-accent-50: #fef4f0;
  --color-accent-100: #fde5db;
  --color-accent-200: #fac7b3;
  --color-accent-300: #f4a182;
  --color-accent-400: #ed8260;
  --color-accent-500: #e76f51;
  --color-accent-600: #c85a3e;

  /* 背景 */
  --color-page-bg: #f5f7f6;
  --color-surface: #ffffff;
  --color-surface-muted: #f1f5f4;

  /* テキスト */
  --color-text-primary: #1a2e2a;
  --color-text-secondary: #4a6560;
  --color-text-muted: #7a938d;

  /* ボーダー */
  --color-border: #e2e8e6;
  --color-border-light: #edf2f0;

  /* セマンティック */
  --color-success: #16a34a;
  --color-error: #dc2626;
  --color-warning: #d97706;

  /* シャドウスケール */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.06), 0 2px 4px -2px rgba(0, 0, 0, 0.04);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.06), 0 4px 6px -4px rgba(0, 0, 0, 0.04);

  /* フォント */
  --font-sans: 'Noto Sans JP', system-ui, -apple-system, sans-serif;
  --font-display: 'Outfit', 'Noto Sans JP', system-ui, sans-serif;
}

/* キーフレーム定義 */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.97); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* ベーススタイル */
@layer base {
  body {
    @apply bg-page-bg text-text-primary font-sans antialiased;
    background-image: radial-gradient(circle, #d8dfdd 0.5px, transparent 0.5px);
    background-size: 24px 24px;
  }
}

@layer utilities {
  .animate-fade-in {
    animation: fadeIn 0.4s ease both;
  }

  .animate-fade-in-up {
    animation: fadeInUp 0.4s ease both;
  }

  .animate-scale-in {
    animation: scaleIn 0.3s ease both;
  }

  .card-base {
    @apply bg-surface rounded-2xl shadow-sm;
  }

  /* カードのインタラクティブ・エレベーション */
  .card-interactive {
    @apply transition-all duration-200 ease-out;
  }

  .card-interactive:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }

  /* リストアイテム左ボーダーアクセント（プライマリ） */
  .list-accent-primary {
    border-left: 3px solid transparent;
    transition: border-color 0.2s ease, background-color 0.15s ease;
  }

  .list-accent-primary:hover {
    border-left-color: var(--color-primary-500);
  }

  /* リストアイテム左ボーダーアクセント（アクセント） */
  .list-accent-warm {
    border-left: 3px solid transparent;
    transition: border-color 0.2s ease, background-color 0.15s ease;
  }

  .list-accent-warm:hover {
    border-left-color: var(--color-accent-500);
  }

  /* アコーディオンのスムーズ展開 */
  .accordion-panel {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 0.3s ease;
  }

  .accordion-panel[data-expanded="true"] {
    grid-template-rows: 1fr;
  }

  .accordion-panel-inner {
    overflow: hidden;
  }

  /* 数値表示用フォント */
  .font-display {
    font-family: var(--font-display);
  }

  .skeleton {
    background: linear-gradient(90deg, #edf2f0 25%, #e2e8e6 50%, #edf2f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    @apply rounded-lg;
  }

  /* テキスト省略時のツールチップ */
  .truncate-with-tooltip {
    position: relative;
  }

  .truncate-with-tooltip::after {
    content: attr(data-fulltext);
    position: absolute;
    left: 0;
    top: calc(100% + 8px);
    z-index: 50;
    padding: 0.375rem 0.75rem;
    background-color: var(--color-text-primary);
    color: white;
    font-size: 0.875rem;
    line-height: 1.4;
    border-radius: 0.5rem;
    white-space: normal;
    max-width: 280px;
    width: max-content;
    word-break: break-word;
    box-shadow: var(--shadow-md);
    opacity: 0;
    visibility: hidden;
    transition: opacity 150ms ease, visibility 150ms ease;
    pointer-events: none;
  }

  /* ツールチップの矢印（上向き） */
  .truncate-with-tooltip::before {
    content: '';
    position: absolute;
    left: 1rem;
    top: calc(100% + 4px);
    z-index: 50;
    border-width: 4px;
    border-style: solid;
    border-color: transparent transparent var(--color-text-primary) transparent;
    opacity: 0;
    visibility: hidden;
    transition: opacity 150ms ease, visibility 150ms ease;
    pointer-events: none;
  }

  .truncate-with-tooltip[data-truncated]:hover::after,
  .truncate-with-tooltip[data-truncated]:hover::before {
    opacity: 1;
    visibility: visible;
    transition-delay: 300ms; /* 表示は300ms遅延、非表示は即座 */
  }
}

/* アニメーション軽減設定への対応 */
@media (prefers-reduced-motion: reduce) {
  .animate-fade-in,
  .animate-fade-in-up,
  .animate-scale-in {
    animation: none !important;
  }

  .skeleton {
    animation: none !important;
  }

  .card-interactive:hover {
    transform: none !important;
  }

  .accordion-panel {
    transition: none !important;
  }

  .truncate-with-tooltip::after,
  .truncate-with-tooltip::before {
    transition: none !important;
  }
}
